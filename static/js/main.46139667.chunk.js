(this["webpackJsonppeat-bomb"]=this["webpackJsonppeat-bomb"]||[]).push([[0],{141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),l=n(71),i=n(33),s=n(63),u=n(38),m={value:0},d=Object(i.combineReducers)({count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT_COUNTER":return Object(u.a)({},e,{value:e.value+1});case"DECREMENT_COUNTER":return Object(u.a)({},e,{value:e.value-1});default:return e}}}),h=Object(i.createStore)(d,Object(s.devToolsEnhancer)({})),p=(n(99),n(49)),f=n(27),g=function(){var e=Object(f.f)();return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"About"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptas possimus doloribus error cumque autem asperiores, ullam deserunt quidem omnis doloremque itaque eius eaque sint facilis unde tenetur reiciendis aliquam soluta?"),r.a.createElement("button",{type:"button",className:"btn",onClick:function(){return e.push("/")}},"Go back"))},b=n(30),w=n.n(b),E=n(46),v=n(31),j=n(72),k=n(188),O=n(190),x=n(193),y=n(194),S=n(195),C=n(198),N=n(185),L=n(197),F=n(144),q=n(199),I=n(201),R=n(200),A=n(142),T=n(184),z=n(196),D=n(183),P=n(202),W=function(e){var t,n=e.width,a=e.height,o=n,c=Object(z.a)({domain:[0,10],range:[0,o],clamp:!0}),l="rgba(64, 64, 64, 0.6)",i=(t=e.points).reduce((function(e,t){return e+t}),0)/t.length;return console.log("> props.points",e.points),console.log("> avg",i),r.a.createElement("svg",{width:1.5*n,height:a},r.a.createElement("rect",{width:n,height:a,fill:"rgba(64, 64, 64, 0)"}),r.a.createElement(A.a,null,e.points.map((function(e,t){var n=c(e),o=.3*a;return r.a.createElement(D.a,{key:"point-".concat(t),className:"dot",cx:n,cy:o,r:3,fill:"rgba(246, 196, 49, 0.5)"})}))),r.a.createElement(P.a,{verticalAnchor:"start",style:{fontSize:11,fill:"rgba(64, 64, 64, 0.6)"}},"n = ".concat(e.points.length)),r.a.createElement(T.a,{from:{x:c(i),y:0},to:{x:c(i),y:.15*a},stroke:"rgba(64, 64, 64, 0.4",strokeWidth:1.5,label:"avg = ".concat(i.toFixed(2)),labelFill:"rgba(64, 64, 64, 0.6)",labelStroke:"none",labelDx:6,labelDy:10}),r.a.createElement(R.a,{top:.6*a,scale:c,tickFormat:function(e){return e},stroke:l,tickStroke:l,tickLength:4,hideZero:!1,tickLabelProps:function(e,t){return{fill:l,fontSize:11,textAnchor:"middle"}}}))},_=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}}}})),J=function(e){return["review #","bottle review #"].some((function(t){return e.data.title.toLowerCase().startsWith(t)}))},M=function(e){return["review #","review ","bottle review #"].some((function(t){return e.data.title.toLowerCase().includes(t)}))},U=function(e){console.log("normaliseScore",e);var t=null;if(-1!==e.search(/^[0-9]{1,}$/g))return t=Number(e),Number(t<=10?t:t/10);if(-1!==e.search(/^[0-9.]{1,}\/[0-9]{3}$/g)){t=e.split("/");var n=Number(t[0]);return Number(n<=10?n:n/10)}return null},V=function(e,t){return e.data.title.substring(e.data.title.toLowerCase().indexOf(t.toLowerCase()))};function $(e,t){return null!==t?[].concat(Object(j.a)(e),[t]):[]}var B=function(){var e=_(),t=r.a.useState(!1),n=Object(v.a)(t,2),o=n[0],c=n[1],l=r.a.useState([]),i=Object(v.a)(l,2),s=i[0],m=i[1],d=r.a.useState(null),h=Object(v.a)(d,2),p=h[0],f=h[1],g=r.a.useState(null),b=Object(v.a)(g,2),j=b[0],N=b[1],R=r.a.useReducer($,[]),A=Object(v.a)(R,2),T=A[0],z=A[1],D=Object(I.a)(p,500),P=Object(v.a)(D,1)[0],B=o&&0===s.length,G=Object(a.useCallback)((function(e,t){Object(E.a)(w.a.mark((function n(){var a,r,o,c,l;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://www.reddit.com/comments/".concat(t,"/.json"));case 2:return a=n.sent,n.next=5,a.json();case 5:if(r=n.sent,console.log("thread",r),null===(o=r[1].data.children[0].data.body.match(/[0-9.]{1,}\/[0-9]{1,3}/g))&&null!==(o=r[1].data.children[0].data.body.match(/Rating: [0-9.]{1,}/g))&&(o=o.map((function(e){return e.replace("Rating: ","")}))),null===o){n.next=17;break}c=o[o.length-1],l=U(c),console.log(e.data.title,"Score",l),console.log("https://www.reddit.com".concat(e.data.permalink)),null!==l&&z(l),n.next=20;break;case 17:return console.log("thread",r[1].data.children[0].data.body),console.log(e.data.title,"No match"),n.abrupt("return",null);case 20:case"end":return n.stop()}}),n)})))()}),[z]);return r.a.useEffect((function(){var e=!0;if(null!==P)return Object(E.a)(w.a.mark((function t(){var n,a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://www.reddit.com/r/scotch/search.json?q=title:review%20AND%20".concat(P,"&sort=new&restrict_sr=1&limit=100"));case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,r=[],console.log("Found n items",a.data.children.length,"for",P),0===a.data.children.length?e&&m([""]):(a.data.children.forEach((function(e){J(e)&&e.data.title.toLowerCase().includes(P.toLowerCase())&&r.push(V(e,P))})),r.sort((function(e,t){return e.length-t.length})),e&&m(Array.from(new Set(r))));case 9:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[B,P]),r.a.useEffect((function(){o||m([])}),[o]),r.a.useEffect((function(){null!==j&&Object(E.a)(w.a.mark((function e(){var t,n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.reddit.com/r/scotch/search.json?q=title:review%20AND%20".concat(j,"&sort=new&restrict_sr=1&limit=100"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=[],n.data.children.forEach((function(e){M(e)&&e.data.title.toLowerCase().includes(j.toLowerCase())?a.push(e):console.log("SKIP",e.data.title)})),console.log("# Fetch scores for",a.length,"items"),a.forEach((function(e){var t=e.data.name.split("t3_")[1];if("4pahzq"===t||"as7w3b"===t||"4w748u"===t||t.length>0){console.log(e.data.title),console.log(e.data.name,t),console.log("https://www.reddit.com".concat(e.data.permalink)),console.log(e.data);var n=G(e,t);console.log(n)}}));case 10:case"end":return e.stop()}}),e)})))()}),[j,G]),r.a.createElement(a.Fragment,null,r.a.createElement(k.a,{component:"main",maxWidth:"xs"},r.a.createElement(O.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(F.a,{component:"h1",variant:"h1"},r.a.createElement("span",{role:"img","aria-label":"Whisky glass image"},"\ud83e\udd43")),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(q.a,{id:"asynchronous-demo",blurOnSelect:!0,open:o,onClose:function(){c(!1)},onInputChange:function(e,t,n){t.length>=5&&(f(t),"input"===n&&c(!0))},onChange:function(e,t){N(t),z(null)},getOptionSelected:function(e,t){return e===t},getOptionLabel:function(e){return e},options:s,loading:B,renderInput:function(e){return r.a.createElement(L.a,Object.assign({},e,{label:"Search for whisky reviews",variant:"outlined",InputProps:Object(u.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,B?r.a.createElement(x.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}}),r.a.createElement(y.a,{container:!0,style:{marginTop:25}},r.a.createElement(y.a,{item:!0},null!==j&&T.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement(W,{width:400,height:80,points:T}))),r.a.createElement(y.a,{item:!0,xs:!0},r.a.createElement(S.a,{href:"https://www.reddit.com/r/Scotch/",variant:"overline",display:"block",align:"center"},"/r/Skotch"," ",r.a.createElement("span",{role:"img","aria-label":"Whisky glass image"},"\u2764\ufe0f"))),r.a.createElement(y.a,{item:!0})))),r.a.createElement(C.a,{mt:8})))},G=function(){return r.a.createElement(p.a,null,r.a.createElement(f.c,null,r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(f.a,{path:"/",component:B,exact:!0}),r.a.createElement(f.a,{path:"/about",component:g})))))};c.a.render(r.a.createElement(l.a,{store:h},r.a.createElement(G,null)),document.getElementById("root"))},90:function(e,t,n){e.exports=n(141)},99:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.46139667.chunk.js.map